# QA & DevOps Report

**Дата:** 26.12.2025
**Проект:** Calculator Application
**Ревьювер:** Jules

## 1. Общее резюме (Executive Summary)

Был проведен полный аудит DevOps и Security составляющих проекта. Основной фокус был сделан на надежность сборки Docker, безопасность контейнеров (hardening) и автоматизацию базовых проверок. Все выявленные критические недостатки были устранены.

## 2. Найденные проблемы и выполненные действия

### 2.1. Надежность Docker (Reliability)

*   **Проблема:** Использование тегов `:latest` или плавающих тегов (например, `maven:3.9-eclipse-temurin-17`), что могло привести к невоспроизводимым сборкам в будущем.
    *   **Решение:** Версии базовых образов зафиксированы (pinned):
        *   Backend: `maven:3.9.6...`, `eclipse-temurin:17.0.10_7-jre`
        *   Frontend: `node:20.11.1-alpine`, `nginx:1.25.4-alpine`
*   **Проблема:** Отсутствие автоматизированной проверки сборки.
    *   **Решение:** Добавлен скрипт `tests/run_smoke_test.py`, который эмулирует CI-процесс (сборка -> тест -> очистка).

### 2.2. Безопасность (Security)

*   **Риск (High):** Контейнеры запускались от `root` пользователя. Это критический риск безопасности.
    *   **Решение (Backend):** В `Dockerfile` создан пользователь `appuser`, приложение запускается от его имени.
    *   **Решение (Frontend):** Nginx переконфигурирован для работы от пользователя `nginx`. Порт изменен на 8080 (так как non-root не может биндиться на порты < 1024), права на директории кэша и логов скорректированы.
*   **Риск (Medium):** Отсутствовали HTTP-заголовки безопасности в Nginx.
    *   **Решение:** В конфигурацию Nginx добавлены:
        *   `X-Frame-Options: SAMEORIGIN`
        *   `X-Content-Type-Options: nosniff`
        *   `Referrer-Policy: strict-origin-when-cross-origin`
        *   `Permissions-Policy`
        *   (Закомментирован) HSTS header (готов к включению при настройке SSL).

### 2.3. Документация

*   **Проблема:** README был на английском (в рамках задания требовался русский) и не содержал инструкций по тестированию.
    *   **Решение:** `README.md` полностью переписан на русском языке, добавлены разделы по запуску, тестированию и траблшутингу.

## 3. Рекомендации (Backlog)

Следующие шаги рекомендуются для дальнейшего улучшения проекта:

1.  **Ограничение ресурсов (Resource Limits):**
    В `docker-compose.yml` стоит добавить секцию `deploy.resources.limits` (CPU/Memory), чтобы один контейнер не мог потребить все ресурсы хоста.
    *Пример:*
    ```yaml
    deploy:
      resources:
        limits:
          cpus: '0.50'
          memory: 512M
    ```
2.  **Read-only Filesystem:**
    По возможности перевести контейнеры в режим `read_only: true`, монтируя только необходимые директории (tmp, logs) как volumes.
3.  **CI/CD:**
    Настроить GitHub Actions для запуска `tests/run_smoke_test.py` при каждом пуше.
4.  **SSL/TLS:**
    Настроить HTTPS терминацию на уровне Nginx для защиты передаваемых данных.

## 4. Заключение

Инфраструктура проекта приведена в соответствие с современными стандартами безопасности и надежности. Проект готов к дальнейшей разработке и эксплуатации.
